!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){const o=document.getElementById("tetris"),n=o.getContext("2d");n.scale(20,20);function r(e,t){const[o,n]=[t.matrix,t.position];for(let t=0;t<o.length;t++)for(let r=0;r<o[t].length;r++)if(0!==o[t][r]&&0!==(e[t+n.y]&&e[t+n.y][r+n.x]))return!0;return!1}const i=[null,"red","yellow","green","blue","orange","pink","purple"];function c(e,t){e.forEach((e,o)=>{e.forEach((e,r)=>{0!==e&&(n.fillStyle=i[e],n.fillRect(r+t.x,o+t.y,1,1))})})}function l(){g.position.y++,r(h,g)&&(g.position.y--,function(e,t){t.matrix.forEach((o,n)=>{o.forEach((o,r)=>{0!==o&&(e[n+t.position.y][r+t.position.x]=o)})})}(h,g),u(),function(){let e=1;e:for(let t=h.length-1;t>0;t--){for(let e=0;e<h[t].length;e++)if(0===h[t][e])continue e;const o=h.splice(t,1)[0].fill(0);h.unshift(o),t++,g.score+=10*e,g.score+=g.bricks,g.bricks=1,e*=2,g.score>g.highScore&&(g.highScore=g.score)}}(),s(),g.slam=!1),p=0}function s(){document.getElementById("score").innerText="Score: "+g.score,document.getElementById("highScore").innerText="High Score: "+g.highScore}function f(e){g.position.x+=e,r(h,g)&&(g.position.x-=e)}function u(){var e;g.matrix=(e="ILJOTSZ"["ILJOTSZ".length*Math.random()|0],g.bricks+=1,"T"===e?[[0,1,0],[1,1,1],[0,0,0]]:"O"===e?[[2,2],[2,2]]:"S"===e?[[0,3,3],[3,3,0],[0,0,0]]:"Z"===e?[[4,4,0],[0,4,4],[0,0,0]]:"L"===e?[[0,5,0],[0,5,0],[0,5,5]]:"J"===e?[[0,6,0],[0,6,0],[6,6,0]]:"I"===e?[[0,7,0,0],[0,7,0,0],[0,7,0,0],[0,7,0,0]]:void 0),g.position.y=0,g.position.x=(h[0].length/2|0)-(g.matrix[0].length/2|0),r(h,g)&&(h.forEach(e=>e.fill(0)),g.bricks=1,g.score=0,s())}function a(e){const t=g.position.x;d(g.matrix,e);let o=1;for(;r(h,g);)g.position.x+=o,o=-(o+(o>0?1:-1)),o>g.matrix[0].length&&(d(g.matrix,-e),g.position.x=t)}function d(e,t){for(let t=0;t<e.length;t++)for(let o=0;o<t;o++)[e[o][t],e[t][o]]=[e[t][o],e[o][t]];t>0?e.forEach(e=>e.reverse()):e.reverse()}let p=0,y=0;const h=function(e,t){const o=[];for(;t--;)o.push(new Array(e).fill(0));return o}(12,20);console.table(h);const g={position:{x:0,y:0},matrix:null,bricks:0,score:0,highScore:0,slam:!1};document.addEventListener("keydown",e=>{37===e.keyCode?f(-1):39===e.keyCode?f(1):40===e.keyCode?(g.slam=!0,l()):81===e.keyCode?a(-1):87===e.keyCode&&a(1)}),u(),s(),function e(t=0){const r=t-y;y=t,p+=r,g.slam&&l(),p>1e3&&(l(),console.log(g.bricks)),n.fillStyle="#000",n.fillRect(0,0,o.width,o.height),c(h,{x:0,y:0}),c(g.matrix,g.position),requestAnimationFrame(e)}()}]);